
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="keycodes  Input+S3: extra keycodes forgotten after suspend ">
    <meta name="keywords" content=""/>
    <meta name="author" content="zhaoqc.github.io"> 
    <meta name="baidu-site-verification" content="Bb11LoG0qB" />
    <link rel="canonical" href="http://zhaoqc.github.io/linux/keycodes.html">
    <link href="http://zhaoqc.github.io/rss.xml" title="RSS 2.0" type="application/rss+xml" rel="alternate"/>
    <link href="/img/icon.ico" rel="icon" type="image/x-icon">
    <title>Input+S3: extra keycodes forgotten after suspend  - 恩赐姐脱</title>
    <link rel="stylesheet" href="/css/min/pure-min.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/min/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/min/grids-responsive-min.css">
    <!--<![endif]-->

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/JekyllPure-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/JekyllPure.css">
    <!--<![endif]-->

    <link href="/css/min/font-awesome.min.css" rel="stylesheet">
    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/min/font-awesome-ie7.min.css">
    <![endif]-->
    <script src="/js/min/jquery-1.7.2.min.js"></script>


</head>

<body>
<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <div class="headerpic">
                <a href="/">
                    <img src="/img/ecjt.png" alt="Profile Picture" style="width: 140px;" title="返回首页">
                </a>
            </div>
            <h1 class="brand-title">恩赐姐脱</h1>
            <h2 class="brand-tagline">Don't write code.</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="/Timing">时间轴</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="/tag">标签库</a>
                    </li>
                    <li class="nav-item">
                    <a class="pure-button" href="/type">博文类</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="/music">音乐屋</a>

                </ul>
            </nav>
            <!--<div class="search" >
                <form action="/search">
                    <input type="text" class="st-default-search-input" id="st-search-input" style="width:90px" class="search-query" placeholder="Search Blog" name="q" title="全站搜索-google">
                </form>
            </div>-->
            
                <div class="search" >
    <form action="/search">
        <input type="text" class="st-default-search-input" id="st-search-input" style="width:90px" class="search-query" placeholder="Search Blog" name="q" title="全站搜索-switch">
    </form>
</div>
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','fQWv9yiBAFy_ae3zcWKA','2.0.0');
</script>
            
            <div id="toc"></div>
            
            
            <nav id="nav">
                <ul class="nav-list">
                    <li class="nav-link">
                    <a class="weibo "  href="http://weibo.com/zhaoqc1991" ><i class="fa fa-weibo fa-2x"></i></a>
                    </li>
                    <li class="nav-link">
                    <a class="github" href="https://github.com/zhaoqc"><i class="fa fa-github fa-2x"></i></a>
                    </li>
                    <li class="nav-link">
                    <a class="rss" href="/rss.xml" ><i class="fa fa-rss fa-2x"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <!--[if lt IE 8]>
        <i class="label label-danger">亲爱的用户，您的浏览器版本过低，建议您升级浏览器获得更好的用户体验</i>
        <![endif]-->
        <div>
            <div class="posts" id="st-results-container">

                <div class="qrcodeTable"></div>
<header class="post-header">
    <img class="post-avatar" height="48" width="48"
         src="/img/ecjt.png">

    <h2 class="post-title">Input+S3: extra keycodes forgotten after suspend </h2>

    <p class="post-meta">By 01月15日  2015  <a
            class="post-categorybut " href="/type/#">linux</a>
    </p>
</header>
<div class="article pure-u-22-24">
    <p>On my Acer TravelMate 660 I lose keycodes for the extra keys (dritek
extensions) after resume.</p>

<p>The system runs setkeycodes during boot sequence to initialize key codes
for the extra keys as below:</p>

<pre><code>/usr/bin/setkeycodes KEYCODES="e025 138 e026 141 e027 171 e074 148 e073 149 e055 229 e056 230 e057 227 e058 228"
# Fn + F1   ~ e025  =&gt; 138 [KEY_HELP] (Help)
# Fn + F2   ~ e026  =&gt; 141 [KEY_SETUP] (Notebook Manager)
# Fn + F3   ~ e027  =&gt; 171 [KEY_CONFIG] (Power Options)
# Mail      ~ e06c  =&gt; 155 [KEY_MAIL] (EMail)
# WWW       ~ e032  =&gt; 150 [KEY_WWW] (Browser)
# P1        ~ e074  =&gt; 148 [KEY_PROG1] (P1)
# P2        ~ e073  =&gt; 149 [KEY_PROG2] (P2)
# Bluetooth ~ e058  =&gt; 228 [KEY_BLUETOOTH_DISABLE] (Disable Bluetooth)
# Bluetooth ~ e057  =&gt; 227 [KEY_BLUETOOTH_ENABLE] (Enable Bluetooth)
# Wireless  ~ e056  =&gt; 230 [KEY_WLAN_DISABLE] (Disable WLAN)
# Wireless  ~ e055  =&gt; 229 [KEY_WLAN_ENABLE] (Enable WLAN)
# Vol UP    ~ e030  =&gt; 115 [KEY_VOLUMEUP] (Increase Volume)
# Vol DOWN  ~ e02e  =&gt; 114 [KEY_VOLUMEDOWN] (Decrease Volume)
# Vol Mute  ~ e020  =&gt; 113 [KEY_MUTE] (Mute volume)

After resume I end up with the following messages when pressing the keys:
[  779.695675] atkbd.c: Unknown key pressed (translated set 2, code 0xd6 on isa0060/serio0).
[  779.695675] atkbd.c: Use 'setkeycodes e056 &lt;keycode&gt;' to make it known.
[  779.705218] atkbd.c: Unknown key released (translated set 2, code 0xd6 on isa0060/serio0).
[  779.705218] atkbd.c: Use 'setkeycodes e056 &lt;keycode&gt;' to make it known.
[  781.603912] atkbd.c: Unknown key pressed (translated set 2, code 0xd5 on isa0060/serio0).
[  781.603912] atkbd.c: Use 'setkeycodes e055 &lt;keycode&gt;' to make it known.
[  781.613564] atkbd.c: Unknown key released (translated set 2, code 0xd5 on isa0060/serio0).
[  781.613564] atkbd.c: Use 'setkeycodes e055 &lt;keycode&gt;' to make it known.
[  782.772662] atkbd.c: Unknown key pressed (translated set 2, code 0xd7 on isa0060/serio0).
[  782.772662] atkbd.c: Use 'setkeycodes e057 &lt;keycode&gt;' to make it known.
[  782.782390] atkbd.c: Unknown key released (translated set 2, code 0xd7 on isa0060/serio0).
[  782.782390] atkbd.c: Use 'setkeycodes e057 &lt;keycode&gt;' to make it known.
[  783.461807] atkbd.c: Unknown key pressed (translated set 2, code 0xd8 on isa0060/serio0).
[  783.461807] atkbd.c: Use 'setkeycodes e058 &lt;keycode&gt;' to make it known.
[  783.471544] atkbd.c: Unknown key released (translated set 2, code 0xd8 on isa0060/serio0).
[  783.471544] atkbd.c: Use 'setkeycodes e058 &lt;keycode&gt;' to make it known.


Is this kind of issue known, what are the options to get kernel to remember the
keycode mappings after s2ram?

System details:
  uname: Linux neptune 2.6.25.4 #8 Fri May 16 20:15:52 CEST 2008 i686 Intel(R)
            Pentium(R) M processor 1500MHz GenuineIntel GNU/Linux
  distro: Gentoo
  suspending with: echo mem &gt; /sys/power/state

Bruno
</code></pre>

</div>
    <div class="pure-g pagination">
        
            <a class="pure-u-1-2 pagination-item " href="/linux/Gentoo-Java-Guide.html" title="gentoo java 安装指南 "><p> <i class="fa fa-mail-reply"></i>&nbsp;gentoo java 安装指南</p></a>
        
        
            <a class="pure-u-1-2 pagination-item " href="/budget/budget-faq.html" title="预算运维常见问题"><p>预算运维常见问题&nbsp;<i class="fa fa-mail-forward"></i></p></a>
        
    </div>
    <link href="/css/code.css" rel="stylesheet">
    <link href="/css/min/fancybox.css" rel="stylesheet">
    <script src="/js/min/jquery.toc.min.js" ></script>
    <script src="/js/min/jquery.qrcode.min.js" ></script>
    <script src="/js/min/jquery.fancybox.pack.js" ></script>
    <script src="/js/page.js" ></script>

    
    
        <!--<a name="comments"> </a>
<div id="comment">
    <div class="ds-thread" data-title="Input+S3: extra keycodes forgotten after suspend "></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:""};
        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = '../js/min/duoshuo.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
                    || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();
    </script>
</div>
-->


<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="" data-title="Input+S3: extra keycodes forgotten after suspend " data-url=""></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"ecjt"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

    



<script type="text/javascript" >
    
    //window.onload = function (){ 
     $(window).scroll(function () {
        if ($('.top-active').css('display') == 'none') {
            mnext();
        }
     });
    
</script>


            </div>
        </div>
        <div class="footer">
                <a href="/about.html">About</a>
                 <a href="/1">Collecting</a>
                <a href="tencent://message/?uin=466484500">QQ</a>
                <a href="https://github.com/zhaoqc">GitHub</a>
            <script src="/js/min/nprogress.min.js"></script>
            <script src="/js/index.js"></script>
        </div>
        <div class="topfade"><a href="javascript:;" title="返回顶部"></a></div>

    </div>
</div>

</body>

</html>
